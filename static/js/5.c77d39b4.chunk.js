(this["webpackJsonpreact-training"]=this["webpackJsonpreact-training"]||[]).push([[5],{401:function(e,t,a){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3cd8Y",mainPhoto:"ProfileInfo_mainPhoto__1Fgjo",label:"ProfileInfo_label__v3rdV",infoRow:"ProfileInfo_infoRow__pq7qB",avatar:"ProfileInfo_avatar__3xuFq",mob:"ProfileInfo_mob__3wm6Z",desk:"ProfileInfo_desk__2ggCB",fullNameDesk:"ProfileInfo_fullNameDesk__2hWsD",uploadBtn:"ProfileInfo_uploadBtn__3Dwkc",fullNameMob:"ProfileInfo_fullNameMob__nfHLl",profileData:"ProfileInfo_profileData__18agI",infoBlockWrap:"ProfileInfo_infoBlockWrap__2pMW1",infoBlock:"ProfileInfo_infoBlock__Yi3uO"}},403:function(e,t,a){e.exports={item:"Post_item__2EmvQ"}},412:function(e,t,a){"use strict";a.r(t);var s=a(12),i=a(399),o=a(400),n=a(406),c=a(405),r=a(0),l=a.n(r),u=a(33),j=a(67),b=a(95),f=a(401),d=a.n(f),m=a(6),p=function(e){var t=Object(r.useState)(!1),a=Object(j.a)(t,2),s=a[0],i=a[1],o=Object(r.useState)(e.status),n=Object(j.a)(o,2),c=n[0],l=n[1];Object(r.useEffect)((function(){l(e.status)}),[e.status]);return Object(m.jsxs)("div",{style:{maxWidth:200,paddingTop:"1rem"},children:[!s&&Object(m.jsx)("div",{children:Object(m.jsx)("span",{onDoubleClick:function(){e.isOwner&&i(!0)},children:e.status||"----"})}),s&&Object(m.jsx)("div",{children:Object(m.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},onBlur:function(){i(!1),e.updateStatus(c)},autoFocus:!0,value:c})})]})},h=a(192),O=a(383),x=a(388),v=a(389),g=a(164),k=a(165),_=function(e){var t=e.handleSubmit,a=e.profile,s=a.fullName,i=a.lookingForAJob,o=a.lookingForAJobDescription,n=a.aboutMe,c=a.contacts,r=c.facebook,l=c.instagram,u=c.github,j=c.mainLink,b=c.twitter,f=c.vk,d=c.website,p=c.youtube;return Object(m.jsxs)(O.a,{layout:"vertical",name:"basic",wrapperCol:{span:24},initialValues:{remember:!0,fullName:s,lookingForAJob:i,lookingForAJobDescription:o,aboutMe:n,contacts:{facebook:r,instagram:l,github:u,mainLink:j,twitter:b,vk:f,website:d,youtube:p}},onFinish:t,autoComplete:"off",children:[Object(m.jsx)(O.a.Item,{label:"Full name:",name:"fullName",rules:[{required:!0,message:"Please input your full name!"}],children:Object(m.jsx)(x.a,{})}),Object(m.jsx)(O.a.Item,{label:"About me:",name:"aboutMe",rules:[{required:!1,message:"About me"}],children:Object(m.jsx)(k.a,{rows:4})}),Object(m.jsx)(O.a.Item,{label:"Looking for a job:",name:"lookingForAJob",valuePropName:"checked",children:Object(m.jsx)(v.a,{})}),Object(m.jsx)(O.a.Item,{label:"My skills:",name:"lookingForAJobDescription",rules:[{required:!0,message:""}],children:Object(m.jsx)(k.a,{})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Contacts: "}),Object.keys(a.contacts).map((function(e){return Object(m.jsx)("div",{children:Object(m.jsx)(O.a.Item,{label:e,name:["contacts","".concat(e)],rules:[{required:!1,message:""}],children:Object(m.jsx)(x.a,{})})},e)}))]}),Object(m.jsx)(O.a.Item,{style:{textAlign:"end"},children:Object(m.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},P=a(380),y=a(381),I=a(409),N=a(410),w=a(404),S=a(414),F=a(415),A=a(411),C=function(e){var t=e.profile,a=e.isOwner,s=e.goToEditMode,i=Object(r.useState)(!1),o=Object(j.a)(i,2),n=o[0],c=o[1];return Object(m.jsxs)("div",{className:d.a.profileData,children:[Object(m.jsx)("div",{className:d.a.fullNameDesk,children:t.fullName}),Object(m.jsxs)("div",{className:d.a.infoRow,children:[Object(m.jsx)("span",{className:d.a.label,children:"About me: "}),t.aboutMe]}),Object(m.jsxs)("div",{className:d.a.infoRow,children:[Object(m.jsx)("span",{className:d.a.label,children:"Looking for a job: "}),t.lookingForAJob?"Yes":"No"]}),t.lookingForAJob&&Object(m.jsxs)("div",{className:d.a.infoRow,children:[Object(m.jsx)("span",{className:d.a.label,children:"My skills: "}),t.lookingForAJobDescription]}),Object(m.jsxs)("div",{className:d.a.infoRow,children:[Object(m.jsxs)("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between"},children:[Object(m.jsx)(g.a,{type:"primary",onClick:function(){c(!0)},children:"Contacts"}),a&&Object(m.jsx)(g.a,{onClick:s,children:Object(m.jsx)(F.a,{})})]}),Object(m.jsx)(N.a,{title:"Contacts",open:n,footer:null,onCancel:function(){c(!1)},children:Object.keys(t.contacts).map((function(e){return Object(m.jsx)(D,{contactTitle:e,contactValue:t.contacts[e]},e)}))})]})]})},D=function(e){var t=e.contactTitle,a=e.contactValue;return Object(m.jsxs)("div",{className:d.a.contact,children:[Object(m.jsxs)("span",{className:d.a.label,children:[t,": "]}),Object(m.jsx)("a",{href:"contactValue",children:a})]})},M=function(e){var t=e.profile,a=e.status,i=e.updateStatus,o=e.isOwner,n=e.savePhoto,c=e.saveProfile,l=Object(r.useState)(!1),u=Object(j.a)(l,2),f=u[0],O=u[1];if(!t)return Object(m.jsx)(b.a,{});var x={onChange:function(e){"uploading"!==e.file.status&&n(e.file.originFileObj),"done"===e.file.status?A.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&A.a.error("".concat(e.file.name," file upload failed."))}};return Object(m.jsx)("div",{className:"mainFrame",children:Object(m.jsxs)(P.a,{className:d.a.infoBlockWrap,children:[Object(m.jsx)(y.a,{xs:24,sm:24,md:8,children:Object(m.jsxs)("div",{className:d.a.infoBlock,children:[Object(m.jsxs)("div",{style:{position:"relative",width:"fit-content"},children:[Object(m.jsx)(I.a,{className:d.a.avatar,src:t.photos.large||h.a}),o&&Object(m.jsx)("div",{className:d.a.uploadBtn,children:Object(m.jsx)(w.a,Object(s.a)(Object(s.a)({},x),{},{showUploadList:!1,children:Object(m.jsx)(g.a,{icon:Object(m.jsx)(S.a,{})})}))})]}),Object(m.jsx)("div",{className:d.a.fullNameMob,children:t.fullName}),Object(m.jsx)(p,{status:a,updateStatus:i,isOwner:o})]})}),Object(m.jsx)(y.a,{xs:24,sm:24,md:16,children:f?Object(m.jsx)(_,{profile:t,handleSubmit:function(e){c(e).then((function(){O(!1)}))}}):Object(m.jsx)(C,{profile:t,isOwner:o,goToEditMode:function(){O(!0)}})})]})})},B=a(64),J=a(403),T=a.n(J),R=a(123),q=function(e){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:T.a.item,children:[Object(m.jsx)("pre",{children:e.message}),Object(m.jsx)(R.a,{style:{position:"absolute",right:"1rem",top:"1rem"},onClick:function(){return t=e.id,void e.onRemove(t);var t}})]})})},U=function(e,t){var a=Object(r.useState)(t),s=Object(j.a)(a,2),i=s[0],o=s[1],n=localStorage.getItem(e);Object(r.useEffect)((function(){n?o(JSON.parse(n)):localStorage.setItem(e,JSON.stringify(t))}),[]);return[i,function(t){o(t),localStorage.setItem(e,JSON.stringify(t))},function(e){o(null),localStorage.removeItem(e)}]},L=function(e){var t=e.isOwner,a=Object(u.d)((function(e){return e.profilePage.posts})),s=U("mem",a),i=Object(j.a)(s,2),o=i[0],n=i[1],c=function(e){var t=o.filter((function(t){return t.id!==e}));n(t)},r=O.a.useForm(),l=Object(j.a)(r,1)[0],b=o.map((function(e,t){return Object(m.jsx)(q,{id:e.id,message:e.message,onRemove:c},t)}));return Object(m.jsx)("div",{children:t&&Object(m.jsxs)("div",{className:"mainFrame",style:{marginTop:"1rem"},children:[Object(m.jsx)(O.a,{form:l,name:"basic",wrapperCol:{span:24},initialValues:{remember:!0},onFinish:function(e){var t=o.map((function(e){return e.id})).includes(o.length)?Math.max.apply(Math,Object(B.a)(o.map((function(e){return e.id}))))+1:o.length;n([].concat(Object(B.a)(o),[{id:t,message:e.newPostText}])),l.resetFields()},autoComplete:"off",children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(y.a,{xs:18,sm:20,children:Object(m.jsx)(O.a.Item,{name:"newPostText",children:Object(m.jsx)(k.a,{placeholder:"Add post"})})}),Object(m.jsx)(y.a,{xs:6,sm:4,style:{textAlign:"end"},children:Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Send"})})})]})}),Object(m.jsx)(P.a,{children:Object(m.jsx)(y.a,{xs:24,sm:20,children:Object(m.jsx)("div",{style:{marginTop:10},children:b})})})]})})},V=function(e){var t=e.profile,a=e.status,s=e.updateStatus,i=e.isOwner,o=e.savePhoto,n=e.saveProfile;return Object(m.jsxs)("div",{children:[Object(m.jsx)(M,{profile:t,status:a,updateStatus:s,isOwner:i,savePhoto:o,saveProfile:n}),Object(m.jsx)(L,{isOwner:i})]})},W=a(195),E=a(37),Y=a(108),z=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.authorizedUserId),e||this.props.history.push("/login"),e?(this.props.getUserProfile(e),this.props.getStatus(e)):console.error("ID should exist in URI params or in state")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(m.jsx)(V,Object(s.a)(Object(s.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),a}(l.a.Component);t.default=Object(Y.c)(Object(u.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:W.c,getStatus:W.b,updateStatus:W.f,savePhoto:W.d,saveProfile:W.e}),E.h)(z)}}]);
//# sourceMappingURL=5.c77d39b4.chunk.js.map