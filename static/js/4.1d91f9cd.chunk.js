(this["webpackJsonpreact-training"]=this["webpackJsonpreact-training"]||[]).push([[4],{328:function(t,e,s){t.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3cd8Y",mainPhoto:"ProfileInfo_mainPhoto__1Fgjo",contact:"ProfileInfo_contact__1N3gp"}},332:function(t,e,s){t.exports={postBlock:"Posts_postBlock__2qcb3",posts:"Posts_posts__tkALa"}},333:function(t,e,s){t.exports={item:"Post_item__2EmvQ"}},334:function(t,e,s){"use strict";s.r(e);var o=s(5),c=s(40),n=s(41),i=s(44),r=s(43),a=s(0),l=s.n(a),j=s(14),u=s(55),b=s(45),d=s(328),p=s.n(d),h=s(1),O=function(t){var e=Object(a.useState)(!1),s=Object(u.a)(e,2),o=s[0],c=s[1],n=Object(a.useState)(t.status),i=Object(u.a)(n,2),r=i[0],l=i[1];Object(a.useEffect)((function(){l(t.status)}),[t.status]);return Object(h.jsxs)("div",{children:[!o&&Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Status: "}),Object(h.jsx)("span",{onDoubleClick:function(){c(!0)},children:t.status||"----"})]}),o&&Object(h.jsx)("div",{children:Object(h.jsx)("input",{onChange:function(t){l(t.currentTarget.value)},onBlur:function(){c(!1),t.updateStatus(r)},autoFocus:!0,value:r})})]})},f=s(115),x=s(36),m=s.n(x),v=s(140),g=s(141),P=s(42),k=s(53),S=Object(g.a)({form:"edit-profile"})((function(t){var e=t.handleSubmit,s=t.profile,o=t.error;return Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"SAVE"})}),o&&Object(h.jsx)("div",{className:m.a.formSummaryError,children:o}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Full name: "}),Object(h.jsx)(v.a,{placeholder:"Full name",name:"fullName",component:k.a})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Looking for a job: "}),Object(h.jsx)(v.a,{placeholder:"",name:"lookingForAJob",component:k.a,type:"checkbox"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"My skills: "}),Object(h.jsx)(v.a,{placeholder:"My skills",name:"lookingForAJobDescription",component:k.b})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"About me: "}),Object(h.jsx)(v.a,{placeholder:"About me",name:"aboutMe",component:k.b})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Contacts: "}),Object.keys(s.contacts).map((function(t){return Object(h.jsx)("div",{className:p.a.contact,children:Object(h.jsxs)("b",{children:[t,": ",Object(h.jsx)(v.a,{placeholder:"",name:"contacts.".concat(t),component:k.a})]})},t)}))]})]})})),A=s(105),_=function(t){var e=t.fullName,s=t.lookingForAJob,o=t.lookingForAJobDescription,c=t.aboutMe,n=t.contacts,i=t.isOwner,r=t.goToEditMode;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:i&&Object(h.jsx)("button",{onClick:r,children:"EDIT"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Full name: "}),e]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Looking for a job: "}),s?"Yes":"No"]}),s&&Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"My skills: "}),o]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"About me: "}),c]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Contacts: "}),Object.keys(n).map((function(t){return Object(h.jsx)(y,{contactTitle:t,contactValue:n[t]},t)}))]})]})},y=function(t){var e=t.contactTitle,s=t.contactValue;return Object(h.jsxs)("div",{className:p.a.contact,children:[Object(h.jsxs)("b",{children:[e,": "]}),Object(h.jsx)("a",{href:"contactValue",children:s})]})},N=function(t){var e=t.profile,s=t.status,o=t.updateStatus,c=t.isOwner,n=t.savePhoto,i=t.saveProfile,r=Object(a.useState)(!1),l=Object(u.a)(r,2),j=l[0],d=l[1];if(!e)return Object(h.jsx)(b.a,{});return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:p.a.descriptionBlock,children:[Object(h.jsx)("img",{src:e.photos.large||f.a,className:p.a.mainPhoto,alt:""}),Object(h.jsx)("div",{children:c&&Object(h.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&n(t.target.files[0])}})}),j?Object(h.jsx)(S,{initialValues:e,profile:e,onSubmit:function(t){i(t).then((function(){d(!1)}))}}):Object(h.jsx)(_,{fullName:e.fullName,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe,contacts:e.contacts,isOwner:c,goToEditMode:function(){d(!0)}}),Object(h.jsx)(O,{status:s,updateStatus:o})]})})},w=s(332),F=s.n(w),I=s(333),C=s.n(I),J=function(t){return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:C.a.item,children:[Object(h.jsx)("img",{src:"https://xmart.pl/wp-content/uploads/2015/03/man4.png",alt:""}),t.message,Object(h.jsx)("div",{children:"post 1"}),Object(h.jsx)("span",{children:"like"})," ",t.likesCount]})})},M=Object(P.a)(10),T=l.a.memo((function(t){var e=t.posts.map((function(t,e){return Object(h.jsx)(J,{message:t.message,likesCount:t.likesCount},e)}));return Object(h.jsxs)("div",{className:F.a.postBlock,children:["my posts",Object(h.jsx)(D,{onSubmit:function(e){t.addPost(e.newPostText)}}),Object(h.jsx)("div",{className:F.a.posts,children:e})]})})),D=Object(g.a)({form:"ProfileAddNewPostForm"})((function(t){return Object(h.jsx)("form",{onSubmit:t.handleSubmit,children:Object(h.jsxs)("div",{children:[Object(h.jsx)(v.a,{component:k.b,name:"newPostText",placeholder:"Add post",validate:[P.b,M]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{children:"Add post"}),Object(h.jsx)("button",{children:"Remove"})]})]})})})),B=T,E=Object(j.connect)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){return t(Object(A.a)(e))}}}))(B),U=function(t){var e=t.profile,s=t.status,o=t.updateStatus,c=t.isOwner,n=t.savePhoto,i=t.saveProfile;return Object(h.jsxs)("div",{children:[Object(h.jsx)(N,{profile:e,status:s,updateStatus:o,isOwner:c,savePhoto:n,saveProfile:i}),Object(h.jsx)(E,{})]})},V=s(11),L=s(10),z=function(t){Object(i.a)(s,t);var e=Object(r.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId),t||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsx)(U,Object(o.a)(Object(o.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),s}(l.a.Component);e.default=Object(L.d)(Object(j.connect)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:A.d,getStatus:A.c,updateStatus:A.g,savePhoto:A.e,saveProfile:A.f}),V.g)(z)}}]);
//# sourceMappingURL=4.1d91f9cd.chunk.js.map